(this["webpackJsonpgoit-react-hw-03-phonebook"]=this["webpackJsonpgoit-react-hw-03-phonebook"]||[]).push([[0],{12:function(t,e,n){t.exports={contacts:"ContactList_contacts__1iGfV",contacts__list:"ContactList_contacts__list__2YUhn",contact__item:"ContactList_contact__item__1OhsU",name:"ContactList_name__1lvHg",number:"ContactList_number__1SjIj",contacts__list_btn:"ContactList_contacts__list_btn__7IyOa"}},14:function(t,e,n){t.exports={title:"RegisterView_title__1g-c_",input:"RegisterView_input__ysrqG",button:"RegisterView_button__12R9w"}},16:function(t,e,n){t.exports={title:"LoginView_title__27Wud",input:"LoginView_input__1ee0V",button:"LoginView_button__14Ay2"}},17:function(t,e,n){t.exports={warning:"HomeView_warning__1xs1j",contacts__area:"HomeView_contacts__area__2G8Tr",newContact__title:"HomeView_newContact__title__3Fyhz",contacts_filter__area:"HomeView_contacts_filter__area__Vo2DO",contacts_list__area:"HomeView_contacts_list__area__2UUti",contacts__title:"HomeView_contacts__title__2CCbh HomeView_newContact__title__3Fyhz"}},19:function(t,e,n){t.exports={link:"Login_link__3W3v3",link__active:"Login_link__active__3oAQH Login_link__3W3v3"}},20:function(t,e,n){t.exports={login__area:"UserMenu_login__area__2XhUs",title:"UserMenu_title__2YSXh",loginName:"UserMenu_loginName__16ifk",button:"UserMenu_button__3aZtw"}},21:function(t,e,n){t.exports={name:"ContactForm_name__10d4G",input:"ContactForm_input__Opu71",input__area:"ContactForm_input__area__2U5lv",input__btn:"ContactForm_input__btn__259a3"}},25:function(t,e,n){t.exports={header:"Header_header__3_Wjq",title:"Header_title__iqEke"}},39:function(t,e,n){},41:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(22),o=n.n(c),i=n(5),u=n(13),s=n(8),l=n(27),b=n(3),j=n(11),p=n(10),f=n(4),h=n.n(f),d=n(6),O="https://connections-api.herokuapp.com";function _(t){return m.apply(this,arguments)}function m(){return(m=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(O,"/users/signup"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()}));case 2:return n=t.sent,t.abrupt("return",JSON.parse(n));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(O,"/users/login"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(O,"/users/current"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then((function(t){return t.json()}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){return k.apply(this,arguments)}function k(){return(k=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(O,"/users/current"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then((function(t){return t.json()}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(O,"/contacts"),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("auth"))}}).then((function(t){return t.json()}));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t){return R.apply(this,arguments)}function R(){return(R=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(O,"/contacts"),{method:"POST",body:JSON.stringify(e),headers:{Authorization:"Bearer ".concat(localStorage.getItem("auth")),"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return t}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(O,"/contacts/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("auth"))}}).then((function(t){return t.json()}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var V,A,T,z,E=Object(s.c)("auth/register",function(){var t=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(e);case 2:return n=t.sent,localStorage.setItem("auth",n.token),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),H=Object(s.c)("auth/login",function(){var t=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e);case 2:return(n=t.sent).token&&localStorage.setItem("auth",n.token),window.location.reload(),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),U=Object(s.c)("auth/refresh",function(){var t=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),F=Object(s.c)("auth/logout",function(){var t=Object(d.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:localStorage.removeItem("auth"),window.location.reload();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),P=Object(s.c)("contacts/get",function(){var t=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),B=Object(s.c)("contact/add",function(){var t=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e);case 2:if(!t.sent.id){t.next=8;break}return t.next=6,N();case 6:return n=t.sent,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),G=Object(s.c)("contacts/delete",function(){var t=Object(d.a)(h.a.mark((function t(e){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(e);case 2:if(n=t.sent,0!==Object.keys(n).length){t.next=8;break}return t.next=6,N();case 6:return a=t.sent,t.abrupt("return",a);case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),J=Object(s.b)("phonebook/filter",(function(t){return{payload:t}})),M=Object(s.d)({},(V={},Object(b.a)(V,E.fulfilled,(function(t,e){var n=e.payload;return Object(j.a)(Object(j.a)({},t),n)})),Object(b.a)(V,H.fulfilled,(function(t,e){var n=e.payload;return Object(j.a)(Object(j.a)({},t),n)})),Object(b.a)(V,U.fulfilled,(function(t,e){var n=e.payload;return Object(j.a)(Object(j.a)({},t),{},{user:Object(j.a)({},n),token:localStorage.getItem("auth")})})),Object(b.a)(V,F.fulfilled,(function(t,e){e.payload;return{}})),V)),W=Object(s.d)([],(A={},Object(b.a)(A,P.fulfilled,(function(t,e){var n=e.payload;return[].concat(Object(l.a)(t),[n])})),Object(b.a)(A,B.fulfilled,(function(t,e){return[e.payload]})),Object(b.a)(A,G.fulfilled,(function(t,e){return[e.payload]})),A)),q=Object(s.d)(!1,(T={},Object(b.a)(T,E.pending,(function(){return!1})),Object(b.a)(T,E.fulfilled,(function(){return!0})),Object(b.a)(T,E.rejected,(function(){return!1})),Object(b.a)(T,H.pending,(function(){return!1})),Object(b.a)(T,H.fulfilled,(function(){return!0})),Object(b.a)(T,H.rejected,(function(){return!1})),Object(b.a)(T,U.pending,(function(){return!1})),Object(b.a)(T,U.fulfilled,(function(){return!0})),Object(b.a)(T,U.rejected,(function(){return!1})),Object(b.a)(T,F.pending,(function(){return!0})),Object(b.a)(T,F.fulfulfilled,(function(){return!1})),Object(b.a)(T,F.rejected,(function(){return!1})),T)),D=Object(s.d)(!1,(z={},Object(b.a)(z,E.pending,(function(){return!0})),Object(b.a)(z,E.fulfilled,(function(){return!1})),Object(b.a)(z,E.rejected,(function(){return!1})),Object(b.a)(z,H.pending,(function(){return!0})),Object(b.a)(z,H.fulfilled,(function(){return!1})),Object(b.a)(z,H.rejected,(function(){return!1})),Object(b.a)(z,U.pending,(function(){return!0})),Object(b.a)(z,U.fulfilled,(function(){return!1})),Object(b.a)(z,U.rejected,(function(){return!1})),Object(b.a)(z,F.pending,(function(){return!0})),Object(b.a)(z,F.fulfulfilled,(function(){return!1})),Object(b.a)(z,F.rejected,(function(){return!1})),Object(b.a)(z,G.pending,(function(){return!0})),Object(b.a)(z,G.fulfilled,(function(){return!1})),Object(b.a)(z,G.rejected,(function(){return!1})),z)),Z=Object(s.d)("",Object(b.a)({},J,(function(t,e){return e.payload}))),X=Object(p.b)({userReducer:M,contactReducer:W,filterReducer:Z,loadingReducer:D,loginReducer:q}),Y=Object(s.a)({reducer:X}),Q=(n(39),n(2)),$=n(19),K=n.n($),tt=n(1);function et(){return Object(tt.jsxs)("div",{children:[Object(tt.jsx)(u.b,{to:"goit-react-hw-08-phonebook/login",className:function(t){return t.isActive?K.a.link__active:K.a.link},children:"Login"}),Object(tt.jsx)(u.b,{to:"goit-react-hw-08-phonebook/register",className:function(t){return t.isActive?K.a.link__active:K.a.link},children:"Register"})]})}var nt=n(20),at=n.n(nt);function rt(){var t=Object(i.b)(),e=Object(Q.f)(),n=Object(i.c)((function(t){return t.loadingReducer})),a=Object(i.c)((function(t){return t.userReducer.user.email}));return Object(tt.jsxs)("div",{className:at.a.login__area,children:[Object(tt.jsx)("h2",{className:at.a.title,children:"Welcome"}),!n&&Object(tt.jsx)("p",{className:at.a.loginName,children:a}),Object(tt.jsx)("button",{type:"button",className:at.a.button,onClick:function(){t(F()),e("/goit-react-hw-08-phonebook")},children:"Logout"})]})}var ct=n(25),ot=n.n(ct);function it(){var t=Object(i.c)((function(t){return t.userReducer}));return Object(tt.jsxs)("header",{className:ot.a.header,children:[Object(tt.jsx)("h1",{className:ot.a.title,children:"Phonebook"}),0!==Object.keys(t).length?Object(tt.jsx)(rt,{}):Object(tt.jsx)(et,{})]})}var ut=n(7),st=n(16),lt=n.n(st);function bt(){var t=Object(a.useState)(),e=Object(ut.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)(),o=Object(ut.a)(c,2),u=o[0],s=o[1],l=Object(i.b)(),b=Object(Q.f)();function j(t){var e=t.target,n=e.name,a=e.value;switch(n){case"email":r(a);break;case"password":s(a)}}function p(){return(p=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l(H({email:n,password:u})),r(""),s(""),b("/goit-react-hw-08-phonebook/");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return"/goit-react-hw-08-phonebook/login"===Object(Q.e)().pathname&&localStorage.getItem("auth")&&b("/goit-react-hw-08-phonebook/"),Object(tt.jsxs)("div",{children:[Object(tt.jsx)("h3",{className:lt.a.title,children:"Login"}),Object(tt.jsxs)("form",{className:lt.a.form,children:[Object(tt.jsx)("input",{type:"text",placeholder:"E-mail",className:lt.a.input,name:"email",value:n,onInput:j}),Object(tt.jsx)("input",{type:"password",placeholder:"Password",className:lt.a.input,name:"password",value:u,onInput:j}),Object(tt.jsx)("button",{type:"button",className:lt.a.button,onClick:function(){return p.apply(this,arguments)},children:"Login"})]})]})}var jt=n(14),pt=n.n(jt);function ft(){var t=Object(a.useState)(),e=Object(ut.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)(),o=Object(ut.a)(c,2),u=o[0],s=o[1],l=Object(a.useState)(),b=Object(ut.a)(l,2),j=b[0],p=b[1],f=Object(i.b)(),O=Object(Q.f)();function _(t){var e=t.target,n=e.name,a=e.value;switch(n){case"name":r(a);break;case"email":s(a);break;case"password":p(a)}}function m(){return(m=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f(E({name:n,email:u,password:j})),r(""),s(""),p(""),O("/goit-react-hw-08-phonebook/");case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return"/goit-react-hw-08-phonebook/register"===Object(Q.e)().pathname&&localStorage.getItem("auth")&&O("/goit-react-hw-08-phonebook/"),Object(tt.jsxs)("div",{children:[Object(tt.jsx)("h3",{className:pt.a.title,children:"Register"}),Object(tt.jsxs)("form",{className:pt.a.form,children:[Object(tt.jsx)("input",{type:"text",name:"name",placeholder:"Name",className:pt.a.input,value:n,onInput:_}),Object(tt.jsx)("input",{type:"text",name:"email",placeholder:"E-mail",className:pt.a.input,value:u,onInput:_}),Object(tt.jsx)("input",{type:"password",name:"password",placeholder:"Password",className:pt.a.input,value:j,onInput:_}),Object(tt.jsx)("button",{type:"button",className:pt.a.button,onClick:function(){return m.apply(this,arguments)},children:"Register"})]})]})}var ht=n(17),dt=n.n(ht),Ot=n(21),_t=n.n(Ot);function mt(){var t=Object(a.useState)(),e=Object(ut.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)(),o=Object(ut.a)(c,2),u=o[0],s=o[1],l=Object(i.b)();function b(t){switch(t.target.name){case"name":r(t.target.value);break;case"tel":s(t.target.value)}}return Object(tt.jsxs)("div",{className:_t.a.input__area,children:[Object(tt.jsx)("p",{className:_t.a.name,children:"Name"}),Object(tt.jsx)("input",{onChange:b,type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,value:n}),Object(tt.jsx)("p",{className:_t.a.name,children:"Phone"}),Object(tt.jsx)("input",{type:"tel",name:"tel",onChange:b,value:u}),Object(tt.jsx)("button",{type:"button",className:_t.a.input__btn,onClick:function(){l(B({name:n,number:u})),r(""),s("")},children:"Add contact"})]})}function xt(t){var e=t.filterContacts;return Object(tt.jsxs)("div",{children:[Object(tt.jsx)("p",{children:"Find contacts by name"}),Object(tt.jsx)("input",{type:"text",onChange:e})]})}var gt=n(12),vt=n.n(gt);function wt(t){var e=t.filter,n=t.deleteContact,a=Object(i.c)((function(t){return t.loadingReducer})),r=Object(i.c)((function(t){return t.contactReducer})),c=Object(i.c)((function(t){return t.filterReducer})),o=Object(i.b)();function u(t){var e=t.target.id;o(G(e))}return Object(tt.jsx)("div",{className:vt.a.contacts,children:Object(tt.jsxs)("ul",{className:vt.a.contacts__list,children:[!a&&""===e&&0!==r.length&&r[0].map((function(t){return Object(tt.jsxs)("li",{className:vt.a.contact__item,children:[Object(tt.jsx)("span",{className:vt.a.name,children:t.name}),Object(tt.jsx)("a",{className:vt.a.number,href:t.number,children:t.number}),Object(tt.jsx)("button",{onClick:u,id:t.id,type:"button",className:vt.a.contacts__list_btn,children:"Delete"})]},t.id)})),!a&&""!==c&&r[0].filter((function(t){return t.name.toLowerCase().includes(c.toLowerCase())})).map((function(t){return Object(tt.jsxs)("li",{className:vt.a.contact__item,children:[Object(tt.jsx)("span",{className:vt.a.name,children:t.name}),Object(tt.jsx)("a",{className:vt.a.number,href:t.number,children:t.number}),Object(tt.jsx)("button",{onClick:n,id:t.id,type:"button",className:vt.a.contacts__list_btn,children:"Delete"})]},t.id)}))]})})}function yt(){var t=Object(i.c)((function(t){return t.userReducer})),e=Object(i.b)(),n=Object(i.c)((function(t){return t.filterReducer}));return Object(tt.jsx)(tt.Fragment,{children:0!==Object.keys(t).length?Object(tt.jsxs)("div",{className:dt.a.contacts__area,children:[Object(tt.jsxs)("div",{children:[Object(tt.jsx)("h3",{className:dt.a.newContact__title,children:"Create new contact"}),Object(tt.jsx)(mt,{})]}),Object(tt.jsx)("div",{className:dt.a.contacts_filter__area,children:Object(tt.jsx)(xt,{filterContacts:function(t){e(J(t.target.value))}})}),Object(tt.jsxs)("div",{children:[Object(tt.jsx)("h3",{className:dt.a.contacts__title,children:"Contacts"}),Object(tt.jsx)(wt,{filter:n})]})]}):Object(tt.jsx)("h2",{className:dt.a.warning,children:"Please login first"})})}function kt(){var t=Object(i.b)(),e=Object(i.c)((function(t){return t.contactReducer}));return Object(a.useEffect)((function(){localStorage.getItem("auth")&&(t(U(localStorage.getItem("auth"))),0===e.length&&t(P()))}),[t,e.length]),Object(tt.jsxs)(tt.Fragment,{children:[Object(tt.jsx)(it,{}),Object(tt.jsx)("div",{className:"container",children:Object(tt.jsxs)(Q.c,{children:[Object(tt.jsx)(Q.a,{path:"goit-react-hw-08-phonebook/",exact:!0,element:Object(tt.jsx)(yt,{})}),Object(tt.jsx)(Q.a,{path:"goit-react-hw-08-phonebook/login",exact:!0,element:Object(tt.jsx)(bt,{})}),Object(tt.jsx)(Q.a,{path:"goit-react-hw-08-phonebook/register",exact:!0,element:Object(tt.jsx)(ft,{})})]})})]})}o.a.render(Object(tt.jsx)(r.a.StrictMode,{children:Object(tt.jsx)(i.a,{store:Y,children:Object(tt.jsx)(u.a,{children:Object(tt.jsx)(kt,{})})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.e1224bcf.chunk.js.map